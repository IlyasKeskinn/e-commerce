import{t as T}from"./d3-timer-N3g7Zl0V.js";import{d as b}from"./d3-dispatch-kxCwF96_.js";import{q as C}from"./d3-quadtree-CSANTnla.js";function Q(n,u){var c,x=1;n==null&&(n=0),u==null&&(u=0);function s(){var l,h=c.length,t,g=0,v=0;for(l=0;l<h;++l)t=c[l],g+=t.x,v+=t.y;for(g=(g/h-n)*x,v=(v/h-u)*x,l=0;l<h;++l)t=c[l],t.x-=g,t.y-=v}return s.initialize=function(l){c=l},s.x=function(l){return arguments.length?(n=+l,s):n},s.y=function(l){return arguments.length?(u=+l,s):u},s.strength=function(l){return arguments.length?(x=+l,s):x},s}function z(n){return function(){return n}}function S(n){return(n()-.5)*1e-6}function F(n){return n.index}function I(n,u){var c=n.get(u);if(!c)throw new Error("node not found: "+u);return c}function U(n){var u=F,c=D,x,s=z(30),l,h,t,g,v,p=1;n==null&&(n=[]);function D(e){return 1/Math.min(t[e.source.index],t[e.target.index])}function M(e){for(var i=0,o=n.length;i<p;++i)for(var y=0,a,w,d,N,A,E,j;y<o;++y)a=n[y],w=a.source,d=a.target,N=d.x+d.vx-w.x-w.vx||S(v),A=d.y+d.vy-w.y-w.vy||S(v),E=Math.sqrt(N*N+A*A),E=(E-l[y])/E*e*x[y],N*=E,A*=E,d.vx-=N*(j=g[y]),d.vy-=A*j,w.vx+=N*(j=1-j),w.vy+=A*j}function f(){if(h){var e,i=h.length,o=n.length,y=new Map(h.map((w,d)=>[u(w,d,h),w])),a;for(e=0,t=new Array(i);e<o;++e)a=n[e],a.index=e,typeof a.source!="object"&&(a.source=I(y,a.source)),typeof a.target!="object"&&(a.target=I(y,a.target)),t[a.source.index]=(t[a.source.index]||0)+1,t[a.target.index]=(t[a.target.index]||0)+1;for(e=0,g=new Array(o);e<o;++e)a=n[e],g[e]=t[a.source.index]/(t[a.source.index]+t[a.target.index]);x=new Array(o),m(),l=new Array(o),r()}}function m(){if(h)for(var e=0,i=n.length;e<i;++e)x[e]=+c(n[e],e,n)}function r(){if(h)for(var e=0,i=n.length;e<i;++e)l[e]=+s(n[e],e,n)}return M.initialize=function(e,i){h=e,v=i,f()},M.links=function(e){return arguments.length?(n=e,f(),M):n},M.id=function(e){return arguments.length?(u=e,M):u},M.iterations=function(e){return arguments.length?(p=+e,M):p},M.strength=function(e){return arguments.length?(c=typeof e=="function"?e:z(+e),m(),M):c},M.distance=function(e){return arguments.length?(s=typeof e=="function"?e:z(+e),r(),M):s},M}const L=1664525,P=1013904223,B=4294967296;function R(){let n=1;return()=>(n=(L*n+P)%B)/B}function X(n){return n.x}function Y(n){return n.y}var G=10,H=Math.PI*(3-Math.sqrt(5));function V(n){var u,c=1,x=.001,s=1-Math.pow(x,1/300),l=0,h=.6,t=new Map,g=T(D),v=b("tick","end"),p=R();n==null&&(n=[]);function D(){M(),v.call("tick",u),c<x&&(g.stop(),v.call("end",u))}function M(r){var e,i=n.length,o;r===void 0&&(r=1);for(var y=0;y<r;++y)for(c+=(l-c)*s,t.forEach(function(a){a(c)}),e=0;e<i;++e)o=n[e],o.fx==null?o.x+=o.vx*=h:(o.x=o.fx,o.vx=0),o.fy==null?o.y+=o.vy*=h:(o.y=o.fy,o.vy=0);return u}function f(){for(var r=0,e=n.length,i;r<e;++r){if(i=n[r],i.index=r,i.fx!=null&&(i.x=i.fx),i.fy!=null&&(i.y=i.fy),isNaN(i.x)||isNaN(i.y)){var o=G*Math.sqrt(.5+r),y=r*H;i.x=o*Math.cos(y),i.y=o*Math.sin(y)}(isNaN(i.vx)||isNaN(i.vy))&&(i.vx=i.vy=0)}}function m(r){return r.initialize&&r.initialize(n,p),r}return f(),u={tick:M,restart:function(){return g.restart(D),u},stop:function(){return g.stop(),u},nodes:function(r){return arguments.length?(n=r,f(),t.forEach(m),u):n},alpha:function(r){return arguments.length?(c=+r,u):c},alphaMin:function(r){return arguments.length?(x=+r,u):x},alphaDecay:function(r){return arguments.length?(s=+r,u):+s},alphaTarget:function(r){return arguments.length?(l=+r,u):l},velocityDecay:function(r){return arguments.length?(h=1-r,u):1-h},randomSource:function(r){return arguments.length?(p=r,t.forEach(m),u):p},force:function(r,e){return arguments.length>1?(e==null?t.delete(r):t.set(r,m(e)),u):t.get(r)},find:function(r,e,i){var o=0,y=n.length,a,w,d,N,A;for(i==null?i=1/0:i*=i,o=0;o<y;++o)N=n[o],a=r-N.x,w=e-N.y,d=a*a+w*w,d<i&&(A=N,i=d);return A},on:function(r,e){return arguments.length>1?(v.on(r,e),u):v.on(r)}}}function W(){var n,u,c,x,s=z(-30),l,h=1,t=1/0,g=.81;function v(f){var m,r=n.length,e=C(n,X,Y).visitAfter(D);for(x=f,m=0;m<r;++m)u=n[m],e.visit(M)}function p(){if(n){var f,m=n.length,r;for(l=new Array(m),f=0;f<m;++f)r=n[f],l[r.index]=+s(r,f,n)}}function D(f){var m=0,r,e,i=0,o,y,a;if(f.length){for(o=y=a=0;a<4;++a)(r=f[a])&&(e=Math.abs(r.value))&&(m+=r.value,i+=e,o+=e*r.x,y+=e*r.y);f.x=o/i,f.y=y/i}else{r=f,r.x=r.data.x,r.y=r.data.y;do m+=l[r.data.index];while(r=r.next)}f.value=m}function M(f,m,r,e){if(!f.value)return!0;var i=f.x-u.x,o=f.y-u.y,y=e-m,a=i*i+o*o;if(y*y/g<a)return a<t&&(i===0&&(i=S(c),a+=i*i),o===0&&(o=S(c),a+=o*o),a<h&&(a=Math.sqrt(h*a)),u.vx+=i*f.value*x/a,u.vy+=o*f.value*x/a),!0;if(f.length||a>=t)return;(f.data!==u||f.next)&&(i===0&&(i=S(c),a+=i*i),o===0&&(o=S(c),a+=o*o),a<h&&(a=Math.sqrt(h*a)));do f.data!==u&&(y=l[f.data.index]*x/a,u.vx+=i*y,u.vy+=o*y);while(f=f.next)}return v.initialize=function(f,m){n=f,c=m,p()},v.strength=function(f){return arguments.length?(s=typeof f=="function"?f:z(+f),p(),v):s},v.distanceMin=function(f){return arguments.length?(h=f*f,v):Math.sqrt(h)},v.distanceMax=function(f){return arguments.length?(t=f*f,v):Math.sqrt(t)},v.theta=function(f){return arguments.length?(g=f*f,v):Math.sqrt(g)},v}function Z(n){var u=z(.1),c,x,s;typeof n!="function"&&(n=z(n==null?0:+n));function l(t){for(var g=0,v=c.length,p;g<v;++g)p=c[g],p.vx+=(s[g]-p.x)*x[g]*t}function h(){if(c){var t,g=c.length;for(x=new Array(g),s=new Array(g),t=0;t<g;++t)x[t]=isNaN(s[t]=+n(c[t],t,c))?0:+u(c[t],t,c)}}return l.initialize=function(t){c=t,h()},l.strength=function(t){return arguments.length?(u=typeof t=="function"?t:z(+t),h(),l):u},l.x=function(t){return arguments.length?(n=typeof t=="function"?t:z(+t),h(),l):n},l}function $(n){var u=z(.1),c,x,s;typeof n!="function"&&(n=z(n==null?0:+n));function l(t){for(var g=0,v=c.length,p;g<v;++g)p=c[g],p.vy+=(s[g]-p.y)*x[g]*t}function h(){if(c){var t,g=c.length;for(x=new Array(g),s=new Array(g),t=0;t<g;++t)x[t]=isNaN(s[t]=+n(c[t],t,c))?0:+u(c[t],t,c)}}return l.initialize=function(t){c=t,h()},l.strength=function(t){return arguments.length?(u=typeof t=="function"?t:z(+t),h(),l):u},l.y=function(t){return arguments.length?(n=typeof t=="function"?t:z(+t),h(),l):n},l}export{U as a,V as b,Q as c,Z as d,$ as e,W as f};
