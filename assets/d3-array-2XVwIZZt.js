import{I as G}from"./internmap-BkD7Hj8s.js";function m(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function H(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function C(n){let e,t,r;n.length!==2?(e=m,t=(o,c)=>m(n(o),c),r=(o,c)=>n(o)-c):(e=n===m||n===H?n:J,t=n,r=n);function i(o,c,l=0,h=o.length){if(l<h){if(e(c,c)!==0)return h;do{const s=l+h>>>1;t(o[s],c)<0?l=s+1:h=s}while(l<h)}return l}function f(o,c,l=0,h=o.length){if(l<h){if(e(c,c)!==0)return h;do{const s=l+h>>>1;t(o[s],c)<=0?l=s+1:h=s}while(l<h)}return l}function u(o,c,l=0,h=o.length){const s=i(o,c,l,h-1);return s>l&&r(o[s-1],c)>-r(o[s],c)?s-1:s}return{left:i,center:u,right:f}}function J(){return 0}function D(n){return n===null?NaN:+n}function*K(n,e){if(e===void 0)for(let t of n)t!=null&&(t=+t)>=t&&(yield t);else{let t=-1;for(let r of n)(r=e(r,++t,n))!=null&&(r=+r)>=r&&(yield r)}}const F=C(m),P=F.right,dn=F.left,an=C(D).center;function O(n,e){let t=0;for(let r of n)r!=null&&(r=+r)>=r&&++t;return t}function Q(n,e){let t=0,r,i=0,f=0;if(e===void 0)for(let u of n)u!=null&&(u=+u)>=u&&(r=u-i,i+=r/++t,f+=r*(u-i));else{let u=-1;for(let o of n)(o=e(o,++u,n))!=null&&(o=+o)>=o&&(r=o-i,i+=r/++t,f+=r*(o-i))}if(t>1)return f/(t-1)}function W(n,e){const t=Q(n,e);return t&&Math.sqrt(t)}function z(n,e){let t,r;if(e===void 0)for(const i of n)i!=null&&(t===void 0?i>=i&&(t=r=i):(t>i&&(t=i),r<i&&(r=i)));else{let i=-1;for(let f of n)(f=e(f,++i,n))!=null&&(t===void 0?f>=f&&(t=r=f):(t>f&&(t=f),r<f&&(r=f)))}return[t,r]}class mn{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const f=t[i],u=e+f,o=Math.abs(e)<Math.abs(f)?e-(u-f):f-(u-e);o&&(t[r++]=o),e=u}return t[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let t=this._n,r,i,f,u=0;if(t>0){for(u=e[--t];t>0&&(r=u,i=e[--t],u=r+i,f=i-(u-r),!f););t>0&&(f<0&&e[t-1]<0||f>0&&e[t-1]>0)&&(i=f*2,r=u+i,i==r-u&&(u=r))}return u}}function N(n){return n}function X(n,...e){return S(n,N,N,e)}function Mn(n,...e){return S(n,Array.from,N,e)}function Y(n,e,...t){return S(n,N,e,t)}function gn(n,e,...t){return S(n,Array.from,e,t)}function S(n,e,t,r){return function i(f,u){if(u>=r.length)return t(f);const o=new G,c=r[u++];let l=-1;for(const h of f){const s=c(h,++l,f),d=o.get(s);d?d.push(h):o.set(s,[h])}for(const[h,s]of o)o.set(h,i(s,u));return e(o)}(n,0)}function Z(n,e){return Array.from(e,t=>n[t])}function T(n,...e){if(typeof n[Symbol.iterator]!="function")throw new TypeError("values is not iterable");n=Array.from(n);let[t]=e;if(t&&t.length!==2||e.length>1){const r=Uint32Array.from(n,(i,f)=>f);return e.length>1?(e=e.map(i=>n.map(i)),r.sort((i,f)=>{for(const u of e){const o=I(u[i],u[f]);if(o)return o}})):(t=n.map(t),r.sort((i,f)=>I(t[i],t[f]))),Z(n,r)}return n.sort(V(t))}function V(n=m){if(n===m)return I;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const r=n(e,t);return r||r===0?r:(n(t,t)===0)-(n(e,e)===0)}}function I(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}function xn(n,e,t){return(e.length!==2?T(Y(n,e,t),([r,i],[f,u])=>m(i,u)||m(r,f)):T(X(n,t),([r,i],[f,u])=>e(i,u)||m(r,f))).map(([r])=>r)}var _=Array.prototype,$=_.slice;function L(n){return()=>n}const v=Math.sqrt(50),k=Math.sqrt(10),nn=Math.sqrt(2);function q(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),f=r/Math.pow(10,i),u=f>=v?10:f>=k?5:f>=nn?2:1;let o,c,l;return i<0?(l=Math.pow(10,-i)/u,o=Math.round(n*l),c=Math.round(e*l),o/l<n&&++o,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*u,o=Math.round(n/l),c=Math.round(e/l),o*l<n&&++o,c*l>e&&--c),c<o&&.5<=t&&t<2?q(n,e,t*2):[o,c,l]}function en(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,f,u]=r?q(e,n,t):q(n,e,t);if(!(f>=i))return[];const o=f-i+1,c=new Array(o);if(r)if(u<0)for(let l=0;l<o;++l)c[l]=(f-l)/-u;else for(let l=0;l<o;++l)c[l]=(f-l)*u;else if(u<0)for(let l=0;l<o;++l)c[l]=(i+l)/-u;else for(let l=0;l<o;++l)c[l]=(i+l)*u;return c}function E(n,e,t){return e=+e,n=+n,t=+t,q(n,e,t)[2]}function tn(n,e,t){let r;for(;;){const i=E(n,e,t);if(i===r||i===0||!isFinite(i))return[n,e];i>0?(n=Math.floor(n/i)*i,e=Math.ceil(e/i)*i):i<0&&(n=Math.ceil(n*i)/i,e=Math.floor(e*i)/i),r=i}}function rn(n){return Math.max(1,Math.ceil(Math.log(O(n))/Math.LN2)+1)}function wn(){var n=N,e=z,t=rn;function r(i){Array.isArray(i)||(i=Array.from(i));var f,u=i.length,o,c,l=new Array(u);for(f=0;f<u;++f)l[f]=n(i[f],f,i);var h=e(l),s=h[0],d=h[1],a=t(l,s,d);if(!Array.isArray(a)){const b=d,p=+a;if(e===z&&([s,d]=tn(s,d,p)),a=en(s,d,p),a[0]<=s&&(c=E(s,d,p)),a[a.length-1]>=d)if(b>=d&&e===z){const g=E(s,d,p);isFinite(g)&&(g>0?d=(Math.floor(d/g)+1)*g:g<0&&(d=(Math.ceil(d*-g)+1)/-g))}else a.pop()}for(var M=a.length,x=0,w=M;a[x]<=s;)++x;for(;a[w-1]>d;)--w;(x||w<M)&&(a=a.slice(x,w),M=w-x);var y=new Array(M+1),j;for(f=0;f<=M;++f)j=y[f]=[],j.x0=f>0?a[f-1]:s,j.x1=f<M?a[f]:d;if(isFinite(c)){if(c>0)for(f=0;f<u;++f)(o=l[f])!=null&&s<=o&&o<=d&&y[Math.min(M,Math.floor((o-s)/c))].push(i[f]);else if(c<0){for(f=0;f<u;++f)if((o=l[f])!=null&&s<=o&&o<=d){const b=Math.floor((s-o)*c);y[Math.min(M,b+(a[b]<=o))].push(i[f])}}}else for(f=0;f<u;++f)(o=l[f])!=null&&s<=o&&o<=d&&y[P(a,o,0,M)].push(i[f]);return y}return r.value=function(i){return arguments.length?(n=typeof i=="function"?i:L(i),r):n},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:L([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(t=typeof i=="function"?i:L(Array.isArray(i)?$.call(i):i),r):t},r}function U(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(t<i||t===void 0&&i>=i)&&(t=i)}return t}function fn(n,e){let t,r=-1,i=-1;if(e===void 0)for(const f of n)++i,f!=null&&(t<f||t===void 0&&f>=f)&&(t=f,r=i);else for(let f of n)(f=e(f,++i,n))!=null&&(t<f||t===void 0&&f>=f)&&(t=f,r=i);return r}function B(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(t>i||t===void 0&&i>=i)&&(t=i)}return t}function on(n,e){let t,r=-1,i=-1;if(e===void 0)for(const f of n)++i,f!=null&&(t>f||t===void 0&&f>=f)&&(t=f,r=i);else for(let f of n)(f=e(f,++i,n))!=null&&(t>f||t===void 0&&f>=f)&&(t=f,r=i);return r}function R(n,e,t=0,r=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(n.length-1,r)),!(t<=e&&e<=r))return n;for(i=i===void 0?I:V(i);r>t;){if(r-t>600){const c=r-t+1,l=e-t+1,h=Math.log(c),s=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*s*(c-s)/c)*(l-c/2<0?-1:1),a=Math.max(t,Math.floor(e-l*s/c+d)),M=Math.min(r,Math.floor(e+(c-l)*s/c+d));R(n,e,a,M,i)}const f=n[e];let u=t,o=r;for(A(n,t,e),i(n[r],f)>0&&A(n,t,r);u<o;){for(A(n,u,o),++u,--o;i(n[u],f)<0;)++u;for(;i(n[o],f)>0;)--o}i(n[t],f)===0?A(n,t,o):(++o,A(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}return n}function A(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function un(n,e=m){let t,r=!1;if(e.length===1){let i;for(const f of n){const u=e(f);(r?m(u,i)>0:m(u,u)===0)&&(t=f,i=u,r=!0)}}else for(const i of n)(r?e(i,t)>0:e(i,i)===0)&&(t=i,r=!0);return t}function ln(n,e,t){if(n=Float64Array.from(K(n,t)),!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return B(n);if(e>=1)return U(n);var r,i=(r-1)*e,f=Math.floor(i),u=U(R(n,f).subarray(0,f+1)),o=B(n.subarray(f+1));return u+(o-u)*(i-f)}}function cn(n,e,t=D){if(!isNaN(e=+e)){if(r=Float64Array.from(n,(o,c)=>D(t(n[c],c,n))),e<=0)return on(r);if(e>=1)return fn(r);var r,i=Uint32Array.from(n,(o,c)=>c),f=r.length-1,u=Math.floor(f*e);return R(i,u,0,f,(o,c)=>I(r[o],r[c])),u=un(i.subarray(0,u+1),o=>r[o]),u>=0?u:-1}}function yn(n,e,t){const r=O(n),i=W(n);return r&&i?Math.ceil((t-e)*Math.cbrt(r)/(3.49*i)):1}function An(n,e){let t=0,r=0;if(e===void 0)for(let i of n)i!=null&&(i=+i)>=i&&(++t,r+=i);else{let i=-1;for(let f of n)(f=e(f,++i,n))!=null&&(f=+f)>=f&&(++t,r+=f)}if(t)return r/t}function Nn(n,e){return ln(n,.5,e)}function In(n,e){return cn(n,.5,e)}function*sn(n){for(const e of n)yield*e}function bn(n){return Array.from(sn(n))}function pn(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,f=new Array(i);++r<i;)f[r]=n+r*t;return f}function qn(n,e){let t=0;if(e===void 0)for(let r of n)(r=+r)&&(t+=r);else{let r=-1;for(let i of n)(i=+e(i,++r,n))&&(t+=i)}return t}export{mn as A,m as a,U as b,B as c,An as d,Nn as e,W as f,X as g,z as h,on as i,T as j,xn as k,wn as l,fn as m,In as n,dn as o,Mn as p,ln as q,gn as r,qn as s,yn as t,Y as u,C as v,an as w,bn as x,pn as y};
