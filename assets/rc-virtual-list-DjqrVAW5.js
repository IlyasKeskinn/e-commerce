import{e as k,b as I,g as et,c as D,_ as bt,a as Mt,d as Pe,h as yt}from"./@babel-Bq6cfFqp.js";import{r as t}from"./react-CaiScDP8.js";import{r as Ge}from"./react-dom-B-GXKKfz.js";import{c as xe}from"./classnames-CitcWPCJ.js";import{R as tt}from"./rc-resize-observer-BSO-zkEq.js";import{q as V,J as xt,u as ge,i as Ue}from"./rc-util-Cf5ZPtx7.js";import"./react-is-DcfIKM1A.js";var rt=t.forwardRef(function(e,s){var i=e.height,u=e.offsetY,d=e.offsetX,o=e.children,l=e.prefixCls,m=e.onInnerResize,S=e.innerProps,b=e.rtl,g=e.extra,r={},c={display:"flex",flexDirection:"column"};return u!==void 0&&(r={height:i,position:"relative",overflow:"hidden"},c=k(k({},c),{},I(I(I(I(I({transform:"translateY(".concat(u,"px)")},b?"marginRight":"marginLeft",-d),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:r},t.createElement(tt,{onResize:function(R){var f=R.offsetHeight;f&&m&&m()}},t.createElement("div",et({style:c,className:xe(I({},"".concat(l,"-holder-inner"),l)),ref:s},S),o,g)))});rt.displayName="Filler";function qe(e,s){var i="touches"in e?e.touches[0]:e;return i[s?"pageX":"pageY"]}var Je=t.forwardRef(function(e,s){var i=e.prefixCls,u=e.rtl,d=e.scrollOffset,o=e.scrollRange,l=e.onStartMove,m=e.onStopMove,S=e.onScroll,b=e.horizontal,g=e.spinSize,r=e.containerSize,c=e.style,h=e.thumbStyle,R=t.useState(!1),f=D(R,2),v=f[0],M=f[1],y=t.useState(null),H=D(y,2),L=H[0],W=H[1],X=t.useState(null),x=D(X,2),B=x[0],$=x[1],j=!u,A=t.useRef(),J=t.useRef(),Z=t.useState(!1),P=D(Z,2),ne=P[0],C=P[1],Q=t.useRef(),N=function(){clearTimeout(Q.current),C(!0),Q.current=setTimeout(function(){C(!1)},3e3)},T=o-r||0,le=r-g||0,E=t.useMemo(function(){if(d===0||T===0)return 0;var z=d/T;return z*le},[d,T,le]),ee=function(w){w.stopPropagation(),w.preventDefault()},ae=t.useRef({top:E,dragging:v,pageY:L,startTop:B});ae.current={top:E,dragging:v,pageY:L,startTop:B};var ce=function(w){M(!0),W(qe(w,b)),$(ae.current.top),l(),w.stopPropagation(),w.preventDefault()};t.useEffect(function(){var z=function(ve){ve.preventDefault()},w=A.current,K=J.current;return w.addEventListener("touchstart",z),K.addEventListener("touchstart",ce),function(){w.removeEventListener("touchstart",z),K.removeEventListener("touchstart",ce)}},[]);var se=t.useRef();se.current=T;var Y=t.useRef();Y.current=le,t.useEffect(function(){if(v){var z,w=function(ve){var oe=ae.current,Re=oe.dragging,pe=oe.pageY,Ee=oe.startTop;if(V.cancel(z),Re){var te=qe(ve,b)-pe,ie=Ee;!j&&b?ie-=te:ie+=te;var be=se.current,Me=Y.current,we=Me?ie/Me:0,re=Math.ceil(we*be);re=Math.max(re,0),re=Math.min(re,be),z=V(function(){S(re,b)})}},K=function(){M(!1),m()};return window.addEventListener("mousemove",w),window.addEventListener("touchmove",w),window.addEventListener("mouseup",K),window.addEventListener("touchend",K),function(){window.removeEventListener("mousemove",w),window.removeEventListener("touchmove",w),window.removeEventListener("mouseup",K),window.removeEventListener("touchend",K),V.cancel(z)}}},[v]),t.useEffect(function(){N()},[d]),t.useImperativeHandle(s,function(){return{delayHidden:N}});var U="".concat(i,"-scrollbar"),O={position:"absolute",visibility:ne?null:"hidden"},F={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return b?(O.height=8,O.left=0,O.right=0,O.bottom=0,F.height="100%",F.width=g,j?F.left=E:F.right=E):(O.width=8,O.top=0,O.bottom=0,j?O.right=0:O.left=0,F.width="100%",F.height=g,F.top=E),t.createElement("div",{ref:A,className:xe(U,I(I(I({},"".concat(U,"-horizontal"),b),"".concat(U,"-vertical"),!b),"".concat(U,"-visible"),ne)),style:k(k({},O),c),onMouseDown:ee,onMouseMove:N},t.createElement("div",{ref:J,className:xe("".concat(U,"-thumb"),I({},"".concat(U,"-thumb-moving"),v)),style:k(k({},F),h),onMouseDown:ce}))});function Et(e){var s=e.children,i=e.setRef,u=t.useCallback(function(d){i(d)},[]);return t.cloneElement(s,{ref:u})}function wt(e,s,i,u,d,o,l){var m=l.getKey;return e.slice(s,i+1).map(function(S,b){var g=s+b,r=o(S,g,{style:{width:u}}),c=m(S);return t.createElement(Et,{key:c,setRef:function(R){return d(S,R)}},r)})}var zt=function(){function e(){Mt(this,e),I(this,"maps",void 0),I(this,"id",0),this.maps=Object.create(null)}return bt(e,[{key:"set",value:function(i,u){this.maps[i]=u,this.id+=1}},{key:"get",value:function(i){return this.maps[i]}}]),e}();function _t(e,s,i){var u=t.useState(0),d=D(u,2),o=d[0],l=d[1],m=t.useRef(new Map),S=t.useRef(new zt),b=t.useRef();function g(){V.cancel(b.current)}function r(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;g();var R=function(){m.current.forEach(function(v,M){if(v&&v.offsetParent){var y=xt(v),H=y.offsetHeight;S.current.get(M)!==H&&S.current.set(M,y.offsetHeight)}}),l(function(v){return v+1})};h?R():b.current=V(R)}function c(h,R){var f=e(h);m.current.get(f),R?(m.current.set(f,R),r()):m.current.delete(f)}return t.useEffect(function(){return g},[]),[c,r,S.current,o]}var Lt=10;function Dt(e,s,i,u,d,o,l,m){var S=t.useRef(),b=t.useState(null),g=D(b,2),r=g[0],c=g[1];return ge(function(){if(r&&r.times<Lt){if(!e.current){c(function(T){return k({},T)});return}o();var h=r.targetAlign,R=r.originAlign,f=r.index,v=r.offset,M=e.current.clientHeight,y=!1,H=h,L=null;if(M){for(var W=h||R,X=0,x=0,B=0,$=Math.min(s.length-1,f),j=0;j<=$;j+=1){var A=d(s[j]);x=X;var J=i.get(A);B=x+(J===void 0?u:J),X=B}for(var Z=W==="top"?v:M-v,P=$;P>=0;P-=1){var ne=d(s[P]),C=i.get(ne);if(C===void 0){y=!0;break}if(Z-=C,Z<=0)break}switch(W){case"top":L=x-v;break;case"bottom":L=B-M+v;break;default:{var Q=e.current.scrollTop,N=Q+M;x<Q?H="top":B>N&&(H="bottom")}}L!==null&&l(L),L!==r.lastTop&&(y=!0)}y&&c(k(k({},r),{},{times:r.times+1,targetAlign:H,lastTop:L}))}},[r,e.current]),function(h){if(h==null){m();return}if(V.cancel(S.current),typeof h=="number")l(h);else if(h&&Pe(h)==="object"){var R,f=h.align;"index"in h?R=h.index:R=s.findIndex(function(y){return d(y)===h.key});var v=h.offset,M=v===void 0?0:v;c({times:0,index:R,offset:M,originAlign:f})}}}function Ht(e,s,i){var u=e.length,d=s.length,o,l;if(u===0&&d===0)return null;u<d?(o=e,l=s):(o=s,l=e);var m={__EMPTY_ITEM__:!0};function S(R){return R!==void 0?i(R):m}for(var b=null,g=Math.abs(u-d)!==1,r=0;r<l.length;r+=1){var c=S(o[r]),h=S(l[r]);if(c!==h){b=r,g=g||c!==S(l[r+1]);break}}return b===null?null:{index:b,multiple:g}}function Tt(e,s,i){var u=t.useState(e),d=D(u,2),o=d[0],l=d[1],m=t.useState(null),S=D(m,2),b=S[0],g=S[1];return t.useEffect(function(){var r=Ht(o||[],e||[],s);(r==null?void 0:r.index)!==void 0&&g(e[r.index]),l(e)},[e]),[b]}var Ze=(typeof navigator>"u"?"undefined":Pe(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const nt=function(e,s){var i=t.useRef(!1),u=t.useRef(null);function d(){clearTimeout(u.current),i.current=!0,u.current=setTimeout(function(){i.current=!1},50)}var o=t.useRef({top:e,bottom:s});return o.current.top=e,o.current.bottom=s,function(l){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=l<0&&o.current.top||l>0&&o.current.bottom;return m&&S?(clearTimeout(u.current),i.current=!1):(!S||i.current)&&d(),!i.current&&S}};function Ct(e,s,i,u,d){var o=t.useRef(0),l=t.useRef(null),m=t.useRef(null),S=t.useRef(!1),b=nt(s,i);function g(v,M){V.cancel(l.current),o.current+=M,m.current=M,!b(M)&&(Ze||v.preventDefault(),l.current=V(function(){var y=S.current?10:1;d(o.current*y),o.current=0}))}function r(v,M){d(M,!0),Ze||v.preventDefault()}var c=t.useRef(null),h=t.useRef(null);function R(v){if(e){V.cancel(h.current),h.current=V(function(){c.current=null},2);var M=v.deltaX,y=v.deltaY,H=v.shiftKey,L=M,W=y;(c.current==="sx"||!c.current&&H&&y&&!M)&&(L=y,W=0,c.current="sx");var X=Math.abs(L),x=Math.abs(W);c.current===null&&(c.current=u&&X>x?"x":"y"),c.current==="y"?g(v,W):r(v,L)}}function f(v){e&&(S.current=v.detail===m.current)}return[R,f]}var It=14/15;function Pt(e,s,i){var u=t.useRef(!1),d=t.useRef(0),o=t.useRef(null),l=t.useRef(null),m,S=function(c){if(u.current){var h=Math.ceil(c.touches[0].pageY),R=d.current-h;d.current=h,i(R)&&c.preventDefault(),clearInterval(l.current),l.current=setInterval(function(){R*=It,(!i(R,!0)||Math.abs(R)<=.1)&&clearInterval(l.current)},16)}},b=function(){u.current=!1,m()},g=function(c){m(),c.touches.length===1&&!u.current&&(u.current=!0,d.current=Math.ceil(c.touches[0].pageY),o.current=c.target,o.current.addEventListener("touchmove",S),o.current.addEventListener("touchend",b))};m=function(){o.current&&(o.current.removeEventListener("touchmove",S),o.current.removeEventListener("touchend",b))},ge(function(){return e&&s.current.addEventListener("touchstart",g),function(){var r;(r=s.current)===null||r===void 0||r.removeEventListener("touchstart",g),m(),clearInterval(l.current)}},[e])}var Ot=20;function Qe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=e/s*e;return isNaN(i)&&(i=0),i=Math.max(i,Ot),Math.floor(i)}function kt(e,s,i,u){var d=t.useMemo(function(){return[new Map,[]]},[e,i.id,u]),o=D(d,2),l=o[0],m=o[1],S=function(g){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g,c=l.get(g),h=l.get(r);if(c===void 0||h===void 0)for(var R=e.length,f=m.length;f<R;f+=1){var v,M=e[f],y=s(M);l.set(y,f);var H=(v=i.get(y))!==null&&v!==void 0?v:u;if(m[f]=(m[f-1]||0)+H,y===g&&(c=f),y===r&&(h=f),c!==void 0&&h!==void 0)break}return{top:m[c-1]||0,bottom:m[h]}};return S}var $t=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],Nt=[],Yt={overflowY:"auto",overflowAnchor:"none"};function Ft(e,s){var i=e.prefixCls,u=i===void 0?"rc-virtual-list":i,d=e.className,o=e.height,l=e.itemHeight,m=e.fullHeight,S=m===void 0?!0:m,b=e.style,g=e.data,r=e.children,c=e.itemKey,h=e.virtual,R=e.direction,f=e.scrollWidth,v=e.component,M=v===void 0?"div":v,y=e.onScroll,H=e.onVirtualScroll,L=e.onVisibleChange,W=e.innerProps,X=e.extraRender,x=e.styles,B=yt(e,$t),$=t.useCallback(function(n){return typeof c=="function"?c(n):n==null?void 0:n[c]},[c]),j=_t($),A=D(j,4),J=A[0],Z=A[1],P=A[2],ne=A[3],C=!!(h!==!1&&o&&l),Q=t.useMemo(function(){return Object.values(P.maps).reduce(function(n,a){return n+a},0)},[P.id,P.maps]),N=C&&g&&(Math.max(l*g.length,Q)>o||!!f),T=R==="rtl",le=xe(u,I({},"".concat(u,"-rtl"),T),d),E=g||Nt,ee=t.useRef(),ae=t.useRef(),ce=t.useState(0),se=D(ce,2),Y=se[0],U=se[1],O=t.useState(0),F=D(O,2),z=F[0],w=F[1],K=t.useState(!1),fe=D(K,2),ve=fe[0],oe=fe[1],Re=function(){oe(!0)},pe=function(){oe(!1)},Ee={getKey:$};function te(n){U(function(a){var p;typeof n=="function"?p=n(a):p=n;var _=ct(p);return ee.current.scrollTop=_,_})}var ie=t.useRef({start:0,end:E.length}),be=t.useRef(),Me=Tt(E,$),we=D(Me,1),re=we[0];be.current=re;var ye=t.useMemo(function(){if(!C)return{scrollHeight:void 0,start:0,end:E.length-1,offset:void 0};if(!N){var n;return{scrollHeight:((n=ae.current)===null||n===void 0?void 0:n.offsetHeight)||0,start:0,end:E.length-1,offset:void 0}}for(var a=0,p,_,q,gt=E.length,Se=0;Se<gt;Se+=1){var Rt=E[Se],pt=$(Rt),Ke=P.get(pt),Ie=a+(Ke===void 0?l:Ke);Ie>=Y&&p===void 0&&(p=Se,_=a),Ie>Y+o&&q===void 0&&(q=Se),a=Ie}return p===void 0&&(p=0,_=0,q=Math.ceil(o/l)),q===void 0&&(q=E.length-1),q=Math.min(q+1,E.length-1),{scrollHeight:a,start:p,end:q,offset:_}},[N,C,Y,E,ne,o]),ue=ye.scrollHeight,de=ye.start,he=ye.end,Oe=ye.offset;ie.current.start=de,ie.current.end=he;var at=t.useState({width:0,height:o}),ke=D(at,2),G=ke[0],ot=ke[1],it=function(a){ot({width:a.width||a.offsetWidth,height:a.height||a.offsetHeight})},$e=t.useRef(),Ne=t.useRef(),ut=t.useMemo(function(){return Qe(G.width,f)},[G.width,f]),lt=t.useMemo(function(){return Qe(G.height,ue)},[G.height,ue]),ze=ue-o,_e=t.useRef(ze);_e.current=ze;function ct(n){var a=n;return Number.isNaN(_e.current)||(a=Math.min(a,_e.current)),a=Math.max(a,0),a}var Ye=Y<=0,Fe=Y>=ze,st=nt(Ye,Fe),Le=function(){return{x:T?-z:z,y:Y}},De=t.useRef(Le()),He=Ue(function(){if(H){var n=Le();(De.current.x!==n.x||De.current.y!==n.y)&&(H(n),De.current=n)}});function We(n,a){var p=n;a?(Ge.flushSync(function(){w(p)}),He()):te(p)}function ft(n){var a=n.currentTarget.scrollTop;a!==Y&&te(a),y==null||y(n),He()}var Te=function(a){var p=a,_=f?f-G.width:0;return p=Math.max(p,0),p=Math.min(p,_),p},vt=Ue(function(n,a){a?(Ge.flushSync(function(){w(function(p){var _=p+(T?-n:n);return Te(_)})}),He()):te(function(p){var _=p+n;return _})}),dt=Ct(C,Ye,Fe,!!f,vt),Xe=D(dt,2),Ce=Xe[0],Ve=Xe[1];Pt(C,ee,function(n,a){return st(n,a)?!1:(Ce({preventDefault:function(){},deltaY:n}),!0)}),ge(function(){function n(p){C&&p.preventDefault()}var a=ee.current;return a.addEventListener("wheel",Ce),a.addEventListener("DOMMouseScroll",Ve),a.addEventListener("MozMousePixelScroll",n),function(){a.removeEventListener("wheel",Ce),a.removeEventListener("DOMMouseScroll",Ve),a.removeEventListener("MozMousePixelScroll",n)}},[C]),ge(function(){f&&w(function(n){return Te(n)})},[G.width,f]);var Be=function(){var a,p;(a=$e.current)===null||a===void 0||a.delayHidden(),(p=Ne.current)===null||p===void 0||p.delayHidden()},je=Dt(ee,E,P,l,$,function(){return Z(!0)},te,Be);t.useImperativeHandle(s,function(){return{getScrollInfo:Le,scrollTo:function(a){function p(_){return _&&Pe(_)==="object"&&("left"in _||"top"in _)}p(a)?(a.left!==void 0&&w(Te(a.left)),je(a.top)):je(a)}}}),ge(function(){if(L){var n=E.slice(de,he+1);L(n,E)}},[de,he,E]);var ht=kt(E,$,P,l),mt=X==null?void 0:X({start:de,end:he,virtual:N,offsetX:z,offsetY:Oe,rtl:T,getSize:ht}),St=wt(E,de,he,f,J,r,Ee),me=null;o&&(me=k(I({},S?"height":"maxHeight",o),Yt),C&&(me.overflowY="hidden",f&&(me.overflowX="hidden"),ve&&(me.pointerEvents="none")));var Ae={};return T&&(Ae.dir="rtl"),t.createElement("div",et({style:k(k({},b),{},{position:"relative"}),className:le},Ae,B),t.createElement(tt,{onResize:it},t.createElement(M,{className:"".concat(u,"-holder"),style:me,ref:ee,onScroll:ft,onMouseEnter:Be},t.createElement(rt,{prefixCls:u,height:ue,offsetX:z,offsetY:Oe,scrollWidth:f,onInnerResize:Z,ref:ae,innerProps:W,rtl:T,extra:mt},St))),N&&ue>o&&t.createElement(Je,{ref:$e,prefixCls:u,scrollOffset:Y,scrollRange:ue,rtl:T,onScroll:We,onStartMove:Re,onStopMove:pe,spinSize:lt,containerSize:G.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb}),N&&f>G.width&&t.createElement(Je,{ref:Ne,prefixCls:u,scrollOffset:z,scrollRange:f,rtl:T,onScroll:We,onStartMove:Re,onStopMove:pe,spinSize:ut,containerSize:G.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb}))}var Wt=t.forwardRef(Ft);Wt.displayName="List";export{Wt as L};
